<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Postprocessing · Biofilm Documentation</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Biofilm Documentation</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../parameters/">Case Parameters</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>Postprocessing</a><ul class="internal"><li><a class="tocitem" href="#Using-the-simulation-outputs"><span>Using the simulation outputs</span></a></li><li><a class="tocitem" href="#Plot-the-final-solution"><span>Plot the final solution</span></a></li><li><a class="tocitem" href="#biofilm_analyze()-Query-Simulation-at-Specified-Times"><span>biofilm_analyze() - Query Simulation at Specified Times</span></a></li><li><a class="tocitem" href="#biofilm_movie()-Make-movie-of-biofilm-quantities"><span>biofilm_movie() - Make movie of biofilm quantities</span></a></li><li><a class="tocitem" href="#biofilm_sol2csv()-Convert-solution-to-CSV-file"><span>biofilm_sol2csv() - Convert solution to CSV file</span></a></li></ul></li><li><a class="tocitem" href="../theory/">Solver Theory</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Postprocessing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Postprocessing</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/markowkes/Biofilm.jl/blob/main/docs/src/postprocessing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><ul><li><a href="#Postprocessing">Postprocessing</a></li><li class="no-marker"><ul><li><a href="#Using-the-simulation-outputs">Using the simulation outputs</a></li><li><a href="#Plot-the-final-solution">Plot the final solution</a></li><li><a href="#biofilm_analyze()-Query-Simulation-at-Specified-Times">biofilm_analyze() - Query Simulation at Specified Times</a></li><li><a href="#biofilm_movie()-Make-movie-of-biofilm-quantities">biofilm_movie() - Make movie of biofilm quantities</a></li><li><a href="#biofilm_sol2csv()-Convert-solution-to-CSV-file">biofilm_sol2csv() - Convert solution to CSV file</a></li></ul></li></ul><hr/><h1 id="Postprocessing"><a class="docs-heading-anchor" href="#Postprocessing">Postprocessing</a><a id="Postprocessing-1"></a><a class="docs-heading-anchor-permalink" href="#Postprocessing" title="Permalink"></a></h1><p>When a simulation completes the solver outputs solution data that can be postprocessed to see additional values and/or plots. </p><h2 id="Using-the-simulation-outputs"><a class="docs-heading-anchor" href="#Using-the-simulation-outputs">Using the simulation outputs</a><a id="Using-the-simulation-outputs-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-simulation-outputs" title="Permalink"></a></h2><p>When a simulation is executed using <code>t,zm,Xt,St,Pb,Sb,Lf,sol = BiofilmSolver(p)</code>, which is a line of code within each of the Case files solver will produce all the outputs described below</p><ul><li><code>t</code> - array of the solution times</li><li><code>zm</code> - array of the biofilm grid locations at the end of the simulation <code>t[end]</code></li><li><code>Xt=Xt(t)</code> - array of the particulate concentrations within the tank as a function of time</li><li><code>St=St(t)</code> - array of the substrate concentrations within the tank as a function of time</li><li><code>Pb=Pb(z)</code> - array of the particulate volume fractions within the biofilm as a function of location within biofilm at the end of the simulation</li><li><code>Sb=Sb(z)</code> - array of the substrate concentrations within the biofilm as a function of location within biofilm at the end of the simulation</li><li><code>Lf=Lf(t)</code> - array of the biofilm thickness as a function of time</li><li><code>sol</code> - entire solution from the ODE solver - contains the time history of all the variables.  This variable is difficult to parse but is used by the functions described below.</li></ul><p>The output can be analyzed using Julia commands.  For example, after running Case1.jl (see <a href="../installation/#Run-Biofilm.jl">Run Biofilm.jl</a>), the maximum substrate concentration in the tank could be found </p><pre><code class="language-julia-repl hljs">julia&gt; maximum(St)
65.37595010026911</code></pre><h2 id="Plot-the-final-solution"><a class="docs-heading-anchor" href="#Plot-the-final-solution">Plot the final solution</a><a id="Plot-the-final-solution-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-the-final-solution" title="Permalink"></a></h2><p>The solution can be plotted using the plot recipe <code>biofilm_plot(sol,p)</code>, which will produce the standard plots of the simulation.  This is useful to make a plot of the solution at the end of the simulation, especially if plots are turned off during the simulation using the optional parameter <code>makePlots=false</code>.  </p><p>An optional third argument <code>desc</code> can be passed to <code>biofilm_plot</code>, e.g., <code>biofilm_plot(sol,p,&quot;Case A&quot;)</code>, which will add <code>&quot;Case A&quot;</code> to the legend labels.  </p><article class="docstring"><header><a class="docstring-binding" id="Biofilm.biofilm_plot" href="#Biofilm.biofilm_plot"><code>Biofilm.biofilm_plot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">biofilm_plot(sol,p)
biofilm_plot(sol,p,desc)</code></pre><p>Plot the solution of a biofilm simulation.  Makes 6 plots Xt(t), St(t), Lf(t), Pb(z), Sb(z), μ(z) or src(z).  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/markowkes/Biofilm.jl/blob/00b86890288fcadfeb9b704f62222fbf896644e5/src/outputs.jl#L111-L116">source</a></section></article><h2 id="biofilm_analyze()-Query-Simulation-at-Specified-Times"><a class="docs-heading-anchor" href="#biofilm_analyze()-Query-Simulation-at-Specified-Times">biofilm_analyze() - Query Simulation at Specified Times</a><a id="biofilm_analyze()-Query-Simulation-at-Specified-Times-1"></a><a class="docs-heading-anchor-permalink" href="#biofilm_analyze()-Query-Simulation-at-Specified-Times" title="Permalink"></a></h2><p>The <code>biofilm_analyze(sol,p,t)</code> function provides a simple way to postprocess data.  This function takes in the computed solution <code>sol</code> and parameters <code>p</code> and analyzes the results and the specified time or times <code>t</code>.  For example, after running Case1.jl (see <a href="../installation/#Run-Biofilm.jl">Run Biofilm.jl</a>) you could look at the solution at <code>t=0.25</code> days using</p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_analyze(sol,p,0.25)
Analyzing Single Substrate and Particulate Case
   Time   |      Bug |   Oxygen | min,max(     Bug) | min,max(  Oxygen) |  Lf [μm] 
    0.250 |      102 |     51.7 |     0.08,    0.08 |     29.1,    51.3 |      545</code></pre><p>which displays the tank and biofilm particulates and substrates and biofilm thickness at the requested time.  Multiple times can be included in the time parameter.  For example to get the values at t=0, 0.25, 0.5, 0.75, 1.0 we can run</p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_analyze(sol,p,0:0.25:1)
Analyzing Single Substrate and Particulate Case
   Time   |      Bug |   Oxygen | min,max(     Bug) | min,max(  Oxygen) |  Lf [μm] 
    0.000 |       10 |       10 |     0.08,    0.08 |        0,       0 |       10
    0.250 |      102 |     51.7 |     0.08,    0.08 |     29.1,    51.3 |      545
    0.500 |      256 |     2.94 |     0.08,    0.08 |    0.568,    2.87 |      348
    0.750 |      257 |     2.93 |     0.08,    0.08 |    0.745,    2.87 |      312
    1.000 |      257 |     2.93 |     0.08,    0.08 |    0.761,    2.87 |      309</code></pre><p>Adding an optional argument <code>makePlot=true</code>, i.e., <code>biofilm_analyze(sol,p,0.25,makePlot=true)</code> will produce a plot of the biofilm quantities at the specified time(s)</p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_analyze(sol,p,0.25,makePlot=true)
Analyzing Single Substrate and Particulate Case
   Time   |      Bug |   Oxygen | min,max(     Bug) | min,max(  Oxygen) |  Lf [μm] 
    0.250 |      102 |     51.7 |     0.08,    0.08 |     29.1,    51.3 |      545</code></pre><p><img src="../images/postprocess.svg" alt="Plots from biofilm_analyze"/></p><article class="docstring"><header><a class="docstring-binding" id="Biofilm.biofilm_analyze" href="#Biofilm.biofilm_analyze"><code>Biofilm.biofilm_analyze</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">biofilm_analyze(sol,p,times)
biofilm_analyze(sol,p,times,makePlot=true)</code></pre><p>Take solution from biofilm solver and outputs variabes and a plot of biofilm variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/markowkes/Biofilm.jl/blob/00b86890288fcadfeb9b704f62222fbf896644e5/src/postprocess.jl#L70-L76">source</a></section></article><h2 id="biofilm_movie()-Make-movie-of-biofilm-quantities"><a class="docs-heading-anchor" href="#biofilm_movie()-Make-movie-of-biofilm-quantities">biofilm_movie() - Make movie of biofilm quantities</a><a id="biofilm_movie()-Make-movie-of-biofilm-quantities-1"></a><a class="docs-heading-anchor-permalink" href="#biofilm_movie()-Make-movie-of-biofilm-quantities" title="Permalink"></a></h2><p>The particulate and substrate concentrations change throughout the simulation, and it is often useful to make movies of how these change over time.  </p><p>The <code>biofilm_movie(times)</code> function provides a convenient way to make these movies. For example, to post process <a href="#ref">Case 5 - Phototroph</a>, which has a light that turns on and off throughout each day we could make a movie of the biofilm conditions during the day and during night.  To make a movie of every 5 days when the light is on, that is at times=1,5,10,... we can use</p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_movie(sol,p,1:5:t[end],filename=&quot;phototroph_day.gif&quot;,fps=5)</code></pre><p>which will analyze each day and combine the results into the movie: <img src="../images/phototroph_day.gif" alt="phototroph during day"/></p><p>To produce the results every 5th night, that is at times=0.5, 5.5, ... we can use</p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_movie(sol,p,0.5:5:t[end],filename=&quot;phototroph_night.gif&quot;,fps=5)</code></pre><p><img src="../images/phototroph_night.gif" alt="phototroph during day"/></p><p>Note that during the day the growth rate is zero and the oxygen concentration is 8.6, which is the inflow concentration <code>Sin</code>.  During the day however, the phototroph growth rate is non-zero, and the growth produces oxygen. </p><article class="docstring"><header><a class="docstring-binding" id="Biofilm.biofilm_movie" href="#Biofilm.biofilm_movie"><code>Biofilm.biofilm_movie</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">biofilm_movie(sol,p,times)
biofilm_movie(sol,p,times,filename=&quot;anim.gif&quot;, fps=20)</code></pre><p>Make a movie of the biofilm particulate volume fraction, substrate concentration, and particulate growthrates at the specified times.</p><p>Optional arguments </p><ul><li>filename: name and type of output, i.e., &quot;biofilm.mp4&quot;, &quot;biofilm.gif&quot;</li><li>framerate</li></ul><p>Examples:</p><p>Create movie with t=0,1,...,10</p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_movie(sol,p,0:1:10)</code></pre><p>Create movie with specified filename and framerate</p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_movie(sol,p,0:1:10,filename=&quot;biofilm.gif&quot;,fps=10)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/markowkes/Biofilm.jl/blob/00b86890288fcadfeb9b704f62222fbf896644e5/src/postprocess.jl#L113-L133">source</a></section></article><h2 id="biofilm_sol2csv()-Convert-solution-to-CSV-file"><a class="docs-heading-anchor" href="#biofilm_sol2csv()-Convert-solution-to-CSV-file">biofilm_sol2csv() - Convert solution to CSV file</a><a id="biofilm_sol2csv()-Convert-solution-to-CSV-file-1"></a><a class="docs-heading-anchor-permalink" href="#biofilm_sol2csv()-Convert-solution-to-CSV-file" title="Permalink"></a></h2><p>The function <code>biofilm_sol2csv( sol, p)</code> takes the output of a simulation and writes the results as a CSV file which can be open in a spreadsheet program (e.g., Excel).  Each row in the file corresponds to a different output time and the column contains the time, the tank particulate and substrate concentrations, biofilm particulate volume fractions and substrate concentrations, and finally the biofilm thickness.  This function can be useful for users that prefer looking at results in a spreadsheet.</p><article class="docstring"><header><a class="docstring-binding" id="Biofilm.biofilm_sol2csv" href="#Biofilm.biofilm_sol2csv"><code>Biofilm.biofilm_sol2csv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">biofilm_sol2csv(sol,p)
biofilm_sol2csv(sol,p; filename)</code></pre><p>Saves the solution of biofilm problem (sol) to a CSV file biofilm.csv  The filename can be changed with the optional parameter</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; biofilm_sol2csv(sol,p)
julia&gt; biofilm_sol2csv(sol,p,filename=&quot;myfile.csv&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/markowkes/Biofilm.jl/blob/00b86890288fcadfeb9b704f62222fbf896644e5/src/postprocess.jl#L151-L162">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><a class="docs-footer-nextpage" href="../theory/">Solver Theory »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 26 June 2023 19:33">Monday 26 June 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
